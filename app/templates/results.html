{% extends "base.html" %}
{% block content %}

<h1 class="text-center mb-4">
  {% if language == 'en' %}
    ğŸ“Š DataScope Analysis Result
  {% else %}
    ğŸ“Š RÃ©sultat de lâ€™analyse DataScope
  {% endif %}
</h1>

<div class="text-center mb-4">
  {% if language == 'en' %}
    <span class="badge bg-primary fs-6">Language selected: English ğŸ‡¬ğŸ‡§</span>
  {% elif language == 'fr' %}
    <span class="badge bg-success fs-6">Langue sÃ©lectionnÃ©e : FranÃ§ais ğŸ‡«ğŸ‡·</span>
  {% endif %}
</div>

<!-- Texte analysÃ© -->
<div class="card mb-4">
  <div class="card-header">
    {% if language == 'en' %}ğŸ§¾ Input Text{% else %}ğŸ§¾ Texte analysÃ©{% endif %}
  </div>
  <div class="card-body">
    <pre class="text-wrap">{{ article_text }}</pre>
  </div>
</div>

<!-- Score -->
<div class="card mb-4">
  <div class="card-header">
    {% if language == 'en' %}ğŸ“ˆ Datafication Score{% else %}ğŸ“ˆ Score de datafication{% endif %}
  </div>
  <div class="card-body">
    <p>
      <span class="badge bg-success fs-5">
        {% if language == 'en' %}Score: {{ score.score }}/10{% else %}Score : {{ score.score }}/10{% endif %}
      </span>
    </p>
    <p>
      <strong>{% if language == 'en' %}Density:{% else %}DensitÃ© :{% endif %}</strong>
      {{ score.density }} ({{ score.structured_items }} {% if language == 'en' %}items{% else %}Ã©lÃ©ments{% endif %} / {{ score.word_count }} {% if language == 'en' %}words{% else %}mots{% endif %})
    </p>
    <p><strong>{% if language == 'en' %}Comment:{% else %}Commentaire :{% endif %}</strong> {{ score_comment }}</p>
    <p><strong>{% if language == 'en' %}Editorial Profile:{% else %}Profil Ã©ditorial :{% endif %}</strong> {{ profile_label }}</p>
  </div>
</div>

<<!-- EntitÃ©s : note informative uniquement -->
<div class="card mb-4">
  <div class="card-header">ğŸ§ 
    {% if language == "en" %}
      Detected Entities (Summary)
    {% else %}
      EntitÃ©s dÃ©tectÃ©es (rÃ©sumÃ©)
    {% endif %}
  </div>
  <div class="card-body">
    {% if language == "en" %}
      <p class="text-muted">ğŸ“ We detected named entities and quantitative elements in the article (locations, dates, numbers). They were used to compute the score. Details hidden for clarity.</p>
    {% else %}
      <p class="text-muted">ğŸ“ Des entitÃ©s nommÃ©es et Ã©lÃ©ments quantitatifs ont Ã©tÃ© dÃ©tectÃ©s dans lâ€™article (lieux, dates, nombres). Elles ont servi au calcul du score. DÃ©tails masquÃ©s pour plus de clartÃ©.</p>
    {% endif %}
  </div>
</div>


<!-- Angles -->
<div class="card mb-4">
  <div class="card-header">
    {% if language == 'en' %}ğŸ§­ Suggested Editorial Angles{% else %}ğŸ§­ Suggestions dâ€™angles journalistiques{% endif %}
  </div>
  <div class="card-body">
    <ul class="list-group list-group-flush">
      {% for item in parsed_angles %}
        <li class="list-group-item">
          <strong>{{ item.title }}</strong><br>
          <span class="text-muted">{{ item.content | markdown }}</span>
        </li>
      {% endfor %}
    </ul>
  </div>
</div>

<!-- Sources -->
<div class="card mb-4">
  <div class="card-header">
    {% if language == 'en' %}ğŸŒ Suggested Sources / Datasets{% else %}ğŸŒ Suggestions de ressources / datasets{% endif %}
  </div>
  <div class="card-body">
    <ul class="list-group list-group-flush">
      {% for item in parsed_sources %}
        <li class="list-group-item">
          <strong>{{ item.title }}</strong><br>
          <span class="text-muted">{{ item.content | markdown }}</span>
        </li>
      {% endfor %}
    </ul>
  </div>
</div>

<!-- Actions -->
<div class="d-flex justify-content-between">
  <a href="/" class="btn btn-outline-secondary">
    {% if language == 'en' %}â† Analyze another article{% else %}â† Analyser un autre article{% endif %}
  </a>
  <form method="POST" action="/download">
    <input type="hidden" name="article_text" value="{{ article_text }}">
    <input type="hidden" name="score" value="{{ score }}">
    <input type="hidden" name="score_comment" value="{{ score_comment }}">
    <input type="hidden" name="profile" value="{{ profile_label }}">
    <input type="hidden" name="entities" value="{{ entities }}">
    <input type="hidden" name="angles" value="{{ angles }}">
    <input type="hidden" name="sources" value="{{ sources }}">
    <button type="submit" class="btn btn-primary">
      {% if language == 'en' %}ğŸ“¥ Export (Markdown){% else %}ğŸ“¥ Exporter (Markdown){% endif %}
    </button>
  </form>
</div>

</div>
{% endblock %}
